<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Starbucks</title>
    <link rel="stylesheet" href="css/main.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Bowlby+One+SC&family=Noto+Sans+KR:wght@100..900&display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css2?family=Denk+One&display=swap"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.4/tiny-slider.css"
    />
  </head>
  <body>
    <section id="gnb" class="gnb"></section>

    <section class="main-banner">
      <div class="container">
        <div class="row">
          <div class="col-sm-4">
            <div class="title-wrapper">
              <h2>MERRIER</h2>
              <h2>TOGETHER</h2>
            </div>
            <div class="product-wrapper">
              <div class="image-box product01">
                <img
                  class="product-desktop"
                  src="./assets/image/main-banner-product01.png"
                  alt=""
                />
                <img
                  class="product-mobile"
                  src="./assets/image/mobile-main-banner-product01.png"
                  alt=""
                />
              </div>
              <div class="image-box product02">
                <img
                  class="product-desktop"
                  src="./assets/image/main-banner-product02.png"
                  alt=""
                />
                <img
                  class="product-mobile"
                  src="./assets/image/mobile-main-banner-product02.png"
                  alt=""
                />
              </div>
              <div class="image-box product03">
                <img
                  class="product-desktop"
                  src="./assets/image/main-banner-product03.png"
                  alt=""
                />
                <img
                  class="product-mobile"
                  src="./assets/image/mobile-main-banner-product03.png"
                  alt=""
                />
              </div>
              <div class="image-box product04">
                <img
                  class="product-desktop"
                  src="./assets/image/main-banner-product04.png"
                  alt=""
                />
                <img
                  class="product-mobile"
                  src="./assets/image/mobile-main-banner-product04.png"
                  alt=""
                />
              </div>
              <div class="image-box product05">
                <img
                  class="product-desktop"
                  src="./assets/image/main-banner-product05.png"
                  alt=""
                />
                <img
                  class="product-mobile"
                  src="./assets/image/mobile-main-banner-product05.png"
                  alt=""
                />
              </div>
            </div>
            <button class="btn-outline-white">자세히보기</button>
          </div>
        </div>
      </div>
    </section>
    <!-- main-banner -->

    <section class="category sm-hidden">
      <div class="contents-wrapper">
        <div class="category-item">
          <a href="/">
            <i class="icon-coffee"></i>
            <p>음료</p>
          </a>
        </div>
        <div class="category-item">
          <a href="/">
            <i class="icon-food"></i>
            <p>푸드</p>
          </a>
        </div>
        <div class="category-item">
          <a href="/">
            <i class="icon-product"></i>
            <p>상품</p>
          </a>
        </div>
        <div class="category-item">
          <a href="/">
            <i class="icon-card"></i>
            <p>카드</p>
          </a>
        </div>
        <div class="category-item">
          <a href="/">
            <i class="icon-store"></i>
            <p>매장</p>
          </a>
        </div>
        <div class="category-item">
          <a href="/">
            <i class="icon-event"></i>
            <p>이벤트</p>
          </a>
        </div>
      </div>
    </section>
    <!-- category -->

    <section id="coffee-bean" class="coffee-bean"></section>
    <!-- section coffee-bean -->

    <section id="card" class="card"></section>
    <!-- section card -->

    <aside id="sidebar" class="sidebar"></aside>

    <div class="overlay" aria-hidden="true"></div>

    <script>
      // function load(htmlFile, jsFile, id) {
      //   fetch(htmlFile)
      //     .then((response) => response.text())
      //     .then((data) => {
      //       let innerHtml = data;
      //       const parent = document.getElementById(id);
      //       parent.insertAdjacentHTML("beforeend", innerHtml);

      //       // if (jsFile) {
      //       //   jsFile.forEach((element) => {
      //       //     var script = document.createElement("script");
      //       //     script.src = element;
      //       //     document.body.appendChild(script);
      //       //   });
      //       // }

      //     });
      // }

      async function load(htmlFile, jsFile, id) {
        try {
          const response = await fetch(htmlFile); // htmlFile의 fetch 요청을 기다림림
          const data = await response.text(); // 요청 결과를 text로 파싱
          const parent = document.getElementById(id);
          parent.insertAdjacentHTML("beforeend", data);

          if (jsFile) {
            for (const element of jsFile) {
              await new Promise((resolve, reject) => {
                const script = document.createElement("script");
                script.src = element;
                script.onload = resolve;
                script.onerror = reject;
                document.body.appendChild(script);
              });
            }
          }
        } catch (error) {
          console.error(`Error loading ${htmlFile}:`, error);
        }
      }

      window.onload = async function () {
        // load(
        //   "./html/gnb.html",
        //   ["./js/sidebar.js", "./js/sidebar-drawer.js"],
        //   "gnb"
        // ); // gnb
        // load("./html/sidebar.html", null, "sidebar"); // sidebar
        // load(
        //   "./html/section-coffee-bean.html",
        //   ["./js/carousels.js"],
        //   "coffee-bean"
        // ); // section coffee-bean
        // load("./html/section-card.html", ["./js/carousel-card.js"], "card"); // section card
        try {
          await load(
            "./html/gnb.html",
            ["./js/sidebar.js", "./js/sidebar-drawer.js"],
            "gnb"
          ); // gnb
          await load("./html/sidebar.html", null, "sidebar"); // sidebar
          await load(
            "./html/section-coffee-bean.html",
            ["./js/carousel-coffee-bean.js"],
            "coffee-bean"
          ); // section coffee-bean
          await load(
            "./html/section-card.html",
            ["./js/carousel-card.js"],
            "card"
          ); // section card

          // 모든 외부 HTML 로드가 완료된 후 IntersectionObserver 초기화
          initializeIntersectionObserver();
        } catch (error) {
          console.error("외부 HTML 로드 중 오류 발생:", error);
        }
      };
    </script>
    <script src="./js/main-banner.js"></script>

    <script src="https://cdnjs.cloudflare.com/ajax/libs/tiny-slider/2.9.2/min/tiny-slider.js"></script>
  </body>
</html>
